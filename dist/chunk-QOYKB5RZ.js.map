{"version":3,"sources":["../src/utils.ts"],"sourcesContent":["import fs from \"fs\";\r\nimport path from \"path\";\r\nimport { fileURLToPath } from \"url\";\r\n\r\nexport const mkdirp = (dir: string) => {\r\n  try {\r\n    fs.mkdirSync(dir, { recursive: true });\r\n  } catch (e: any) {\r\n    if (e.code === \"EEXIST\") return;\r\n    throw e;\r\n  }\r\n};\r\n\r\nexport const rimraf = (path: string) => {\r\n  ((fs as any).rmSync || fs.rmdirSync)(path, { recursive: true, force: true });\r\n};\r\n\r\nfunction identity(x: string) {\r\n  return x;\r\n}\r\n\r\nexport const copy = (from: string, to: string, rename = identity) => {\r\n  if (!fs.existsSync(from)) return;\r\n\r\n  const stats = fs.statSync(from);\r\n\r\n  if (stats.isDirectory()) {\r\n    fs.readdirSync(from).forEach((file) => {\r\n      copy(path.join(from, file), path.join(to, rename(file)));\r\n    });\r\n  } else {\r\n    mkdirp(path.dirname(to));\r\n    fs.copyFileSync(from, to);\r\n  }\r\n};\r\n\r\nexport const dist = (path: string) => {\r\n  return fileURLToPath(new URL(`./${path}`, import.meta.url).href);\r\n};\r\n\r\nexport type PackageManager = \"npm\" | \"pnpm\" | \"yarn\";\r\nexport const getUserPkgManager: () => PackageManager = () => {\r\n  // This environment variable is set by npm and yarn but pnpm seems less consistent\r\n  const userAgent = process.env.npm_config_user_agent;\r\n\r\n  if (userAgent) {\r\n    if (userAgent.startsWith(\"yarn\")) {\r\n      return \"yarn\";\r\n    } else if (userAgent.startsWith(\"pnpm\")) {\r\n      return \"pnpm\";\r\n    } else {\r\n      return \"npm\";\r\n    }\r\n  } else {\r\n    // If no user agent is set, assume npm\r\n    return \"npm\";\r\n  }\r\n};\r\n"],"mappings":"swBAAA,OAAOA,MAAQ,KACf,OAAOC,MAAU,OACjB,OAAS,iBAAAC,MAAqB,MAEvB,IAAMC,EAAUC,GAAgB,CACrC,GAAI,CACFJ,EAAG,UAAUI,EAAK,CAAE,UAAW,EAAK,CAAC,CACvC,OAASC,EAAP,CACA,GAAIA,EAAE,OAAS,SAAU,OACzB,MAAMA,CACR,CACF,EAEaC,EAAUL,GAAiB,EACpCD,EAAW,QAAUA,EAAG,WAAWC,EAAM,CAAE,UAAW,GAAM,MAAO,EAAK,CAAC,CAC7E,EAEA,SAASM,EAASC,EAAW,CAC3B,OAAOA,CACT,CAEO,IAAMC,EAAO,CAACC,EAAcC,EAAYC,EAASL,IAAa,CACnE,GAAI,CAACP,EAAG,WAAWU,CAAI,EAAG,OAEZV,EAAG,SAASU,CAAI,EAEpB,YAAY,EACpBV,EAAG,YAAYU,CAAI,EAAE,QAASG,GAAS,CACrCJ,EAAKR,EAAK,KAAKS,EAAMG,CAAI,EAAGZ,EAAK,KAAKU,EAAIC,EAAOC,CAAI,CAAC,CAAC,CACzD,CAAC,GAEDV,EAAOF,EAAK,QAAQU,CAAE,CAAC,EACvBX,EAAG,aAAaU,EAAMC,CAAE,EAE5B,EAEaG,EAAQb,GACZC,EAAc,IAAI,IAAI,KAAKD,IAAQ,YAAY,GAAG,EAAE,IAAI,EAIpDc,EAA0C,IAAM,CAE3D,IAAMC,EAAY,QAAQ,IAAI,sBAE9B,OAAIA,EACEA,EAAU,WAAW,MAAM,EACtB,OACEA,EAAU,WAAW,MAAM,EAC7B,OAEA,MAIF,KAEX","names":["fs","path","fileURLToPath","mkdirp","dir","e","rimraf","identity","x","copy","from","to","rename","file","dist","getUserPkgManager","userAgent"]}